{"version":3,"sources":["../../lib/es5Support.js"],"names":["_","require","path","debug","exports","fallbackToES5","isESvSomethingSupported","eval","err","isES5VersionBranch","endsWith","__dirname","sep","_path","extend"],"mappings":"AAAA;;AACA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,QAAQF,QAAQ,OAAR,EAAiB,qBAAjB,CAAZ;;AAEAG,QAAQC,aAAR,GAAwBA,aAAxB;;AAEA,IAAIC,0BAA0B,IAA9B;AACA,IAAI;AACAC,SAAK,qHAAL;AACAJ,UAAM,wBAAN;AACH,CAHD,CAIA,OAAOK,GAAP,EAAY;AACRF,8BAA0B,KAA1B;AACAH,UAAM,qBAAN;AACH;;AAED,IAAIM,qBAAqBT,EAAEU,QAAF,CAAWC,SAAX,EAAsB,QAAQT,KAAKU,GAAb,GAAmB,KAAzC,CAAzB;;AAEA,SAASP,aAAT,CAAuBD,OAAvB,EAAgCS,KAAhC,EAAuC;AACnC,QAAIP,2BAA2BG,kBAA/B,EAAmD;AAC/C,eAAO,KAAP;AACH;;AAEDR,YAAQ,gBAAR;AACAD,MAAEc,MAAF,CAASV,WAAW,EAApB,EAAwBH,QAAQ,YAAYY,KAApB,KAA8B,EAAtD;AACA,WAAO,IAAP;AACH","file":"es5Support.js","sourcesContent":["'use strict';\nvar _ = require('lodash');\nvar path = require('path');\nvar debug = require('debug')('fastcall:es5Support');\n\nexports.fallbackToES5 = fallbackToES5;\n\nvar isESvSomethingSupported = true;\ntry {\n    eval('const err = () => { throw new Error(`foo`); };const args = [\"a\", \"return a\"];new Function(...args)(1) === 1||err();');\n    debug('running in ES2015 mode');\n}\ncatch (err) {\n    isESvSomethingSupported = false;\n    debug('falling back to ES5');\n}\n\nvar isES5VersionBranch = _.endsWith(__dirname, 'es5' + path.sep + 'lib');\n\nfunction fallbackToES5(exports, _path) {\n    if (isESvSomethingSupported || isES5VersionBranch) {\n        return false;\n    }\n\n    require('babel-polyfill');\n    _.extend(exports || {}, require('../es5/' + _path) || {});\n    return true;\n}"]}